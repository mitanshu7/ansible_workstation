- name: Ensure psutil is installed (Debian)
  ansible.builtin.apt:
    name: python3-psutil
    state: latest
  when: ansible_distribution == "Debian"

- name: Ensure psutil is installed (Fedora)
  ansible.builtin.dnf:
    name: python3-psutil
    state: latest
  when: ansible_distribution == "Fedora"

- name: Enable Minimize and Maximize buttons on titlebars
  community.general.dconf:
    key: "/org/gnome/desktop/wm/preferences/button-layout"
    value: "':minimize,maximize,close'"
  changed_when: false
  become_user: '{{ target_user }}'

- name: Turn on Large Text in Accessibility
  community.general.dconf:
    key: "/org/gnome/desktop/interface/text-scaling-factor"
    value: '1.25'
  changed_when: false
  become_user: '{{ target_user }}'

- name: Enable Tap to Click for touchpad
  community.general.dconf:
    key: "/org/gnome/desktop/peripherals/touchpad/tap-to-click"
    value: 'true'
  changed_when: false
  become_user: '{{ target_user }}'

- name: Set Do Not Disturb mode in GNOME
  ansible.builtin.dconf:
    key: /org/gnome/desktop/notifications/show-banners
    value: false
  become_user: '{{ target_user }}'
